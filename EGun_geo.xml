

<geometry>

    <!-- ============================= -->
    <!--       GEOMETRY VARIABLES      -->
    <!-- ============================= -->
    <variable name="photocathode_radius" value="0.5"/>           <!-- mm -->
    <variable name="photocathode_vertical_length_PY" value="5.0"/>       <!-- mm -->
    <variable name="photocathode_horizontal_length_PX" value="30.0"/>    <!-- mm -->
    <variable name="fillet_radius" value="0.5"/>         <!-- mm -->

    <!-- Mesh quality -->
    <variable name="mesh_scale" value="4.0"/>
    <variable name="mesh_power" value="1.0"/>


    <!-- ============================= -->
    <!--     1. VERTICAL CYLINDER      -->
    <!-- ============================= -->
    <surface name="phtocathode_vericle_surface">
        <cylinder_surface
            x0="0" y0="0" z0="0"
            r="{photocathode_radius}"
            dx="0" dy="0" dz="{photocathode_vertical_length_PY}"
            mesh_count="{10*mesh_scale}"
            mesh_power="{mesh_power}"
        />
    </surface>


    <!-- ============================= -->
    <!--     2. SMOOTH FILLET BEND     -->
    <!-- ============================= -->
    <surface name="photocathode_fillet">
        <rotated_line_segment_surface
            angle="90."
            steps="{20*mesh_scale}"
        >
            <!-- cross-section of solid pipe -->
            <line_segment
                x1="{photocathode_radius}"  y1="{fillet_radius}"
                x2="{-photocathode_radius}" y2="{fillet_radius}"
                line_mesh_count="{4*mesh_scale}"
                line_mesh_power="{mesh_power}"
            />
        </rotated_line_segment_surface>

        <!-- position bend at top of vertical pipe -->
        <transformation displacement="0 0 {photocathode_vertical_length_PY}"/>
    </surface>


    <!-- ============================= -->
    <!--   3. HORIZONTAL CYLINDER      -->
    <!-- ============================= -->
    <surface name="photocathode_horizontal_surface">
        <cylinder_surface
            x0="0"
            y0="{fillet_radius}"
            z0="{photocathode_vertical_length_PY + fillet_radius}"
            r="{photocathode_radius}"
            dx="{photocathode_horizontal_length_PX}" dy="0" dz="0"
            mesh_count="{20*mesh_scale}"
            mesh_power="{mesh_power}"
        />
    </surface>


    <!-- ============================= -->
    <!--       4. FINAL ASSEMBLY       -->
    <!-- ============================= -->
    <space name="photocathode_assembly">
        <surface node="phtocathode_vericle_surface"/>
        <surface node="photocathode_fillet"/>
        <surface node="photocathode_horizontal_surface"/>
    </space>


</geometry>





