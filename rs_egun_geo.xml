<geometry>

    <!--==========================
         Define parameters
    ==========================-->
    <define name="photocathode_radius" value="{5.e-4}"/>
    <define name="photocathode_height" value="{5.e-3}"/>

    <define name="frontelectrode_radius" value="{1.e-3}"/>
    <define name="frontelectrode_height" value="{2.5e-3}"/>

    <define name="rs_egun_curvature_n" value="20"/>
    <define name="rs_egun_opening_curvature_n" value="9"/>
    <define name="rs_egun_arc_count" value="25"/>
    <define name="rs_egun_mesh_scale" value="5"/>
    <define name="rs_egun_mesh_power" value="1"/>

    <!--==========================
         Photocathode surfaces
    ==========================-->
    <cylinder_surface name="photocathode_surface" 
                      z1="0." 
                      z2="{[photocathode_height]/2}"
                      r="[photocathode_radius]" 
                      longitudinal_mesh_count="[rs_egun_mesh_scale]" 
                      longitudinal_mesh_power="[rs_egun_mesh_power]"        
                      axial_mesh_count="[rs_egun_arc_count]"/>

    <disk_surface name="photocathode_disk_surface" z="0" 
                  r="[photocathode_radius]" 
                  radial_mesh_count="14" radial_mesh_power="5" 
                  axial_mesh_count="20"/>

    <space name="photocathode_assembly">
        <surface name="photocathode_surface_assembled" node="photocathode_surface">
            <transformation displacement="0. 0. 0."/>
        </surface>

        <surface name="photocathode_disk_surface_assembled" node="photocathode_disk_surface">
            <transformation displacement="0. 0. 0"/>
        </surface>         
    </space>

    <!--==========================
         Frontelectrode surfaces
         Rotated perpendicular to Z-axis
         Shifted 1 mm away from photocathode
    ==========================-->
    <cylinder_surface name="frontelctrode_surface" 
                      z1="0." 
                      z2="[frontelectrode_height]"
                      r="[frontelectrode_radius]" 
                      longitudinal_mesh_count="[rs_egun_mesh_scale]" 
                      longitudinal_mesh_power="[rs_egun_mesh_power]"        
                      axial_mesh_count="[rs_egun_arc_count]"/>

    <disk_surface name="frontelectrode_disk_surface" z="0" 
                  r="[frontelectrode_radius]" 
                  radial_mesh_count="14" radial_mesh_power="5" 
                  axial_mesh_count="20"/>

    <space name="frontelectrode_assembly">
        <!-- Shift 1 mm away from photocathode surface + rotate perpendicular to Z -->
        <transformation displacement="0.0015 0. 0." rotation_euler="0. 90. 0." />

        <surface name="frontelectrode_surface_assembled" node="frontelctrode_surface">
            <transformation displacement="0. 0. 0."/>
        </surface>

        <surface name="frontelectrode_disk_surface_assembled_bottom" node="frontelectrode_disk_surface">
            <transformation displacement="0. 0. 0."/>
        </surface>

        <surface name="frontelectrode_disk_surface_assembled_top" node="frontelectrode_disk_surface">
            <transformation displacement="0. 0. [frontelectrode_height]"/>
        </surface>
    </space>

</geometry>

